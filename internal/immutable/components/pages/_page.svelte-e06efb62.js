import{S as xt,i as Ut,s as Gt,k as A,a as B,l as P,m as C,h as w,c as K,n as b,Q as vt,R as ue,b as ft,F as y,T as fe,U as le,V as _t,B as bt,W as he,o as de,A as pe,X as j,Y as ge,w as me,q as _e,x as ye,r as ve,y as be,Z as we,f as Ee,t as De,z as Te,_ as Se}from"../../chunks/index-6a755851.js";function ke(n,t,e){return Math.max(t,Math.min(n,e))}const D={toVector(n,t){return n===void 0&&(n=t),Array.isArray(n)?n:[n,n]},add(n,t){return[n[0]+t[0],n[1]+t[1]]},sub(n,t){return[n[0]-t[0],n[1]-t[1]]},addTo(n,t){n[0]+=t[0],n[1]+=t[1]},subTo(n,t){n[0]-=t[0],n[1]-=t[1]}};function wt(n,t,e){return t===0||Math.abs(t)===1/0?Math.pow(n,e*5):n*t*e/(t+e*n)}function Et(n,t,e,s=.15){return s===0?ke(n,t,e):n<t?-wt(t-n,e-t,s)+t:n>e?+wt(n-e,e-t,s)+e:n}function Oe(n,[t,e],[s,i]){const[[r,o],[a,h]]=n;return[Et(t,r,o,s),Et(e,a,h,i)]}function L(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Dt(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,s)}return e}function m(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Dt(Object(e),!0).forEach(function(s){L(n,s,e[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Dt(Object(e)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(e,s))})}return n}const Ft={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Tt(n){return n?n[0].toUpperCase()+n.slice(1):""}const Ie=["enter","leave"];function Ae(n=!1,t){return n&&!Ie.includes(t)}function Pe(n,t="",e=!1){const s=Ft[n],i=s&&s[t]||t;return"on"+Tt(n)+Tt(i)+(Ae(e,i)?"Capture":"")}const Ce=["gotpointercapture","lostpointercapture"];function Le(n){let t=n.substring(2).toLowerCase();const e=!!~t.indexOf("passive");e&&(t=t.replace("passive",""));const s=Ce.includes(t)?"capturecapture":"capture",i=!!~t.indexOf(s);return i&&(t=t.replace("capture","")),{device:t,capture:i,passive:e}}function Me(n,t=""){const e=Ft[n],s=e&&e[t]||t;return n+s}function dt(n){return"touches"in n}function Yt(n){return dt(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function Re(n){return Array.from(n.touches).filter(t=>{var e,s;return t.target===n.currentTarget||((e=n.currentTarget)===null||e===void 0||(s=e.contains)===null||s===void 0?void 0:s.call(e,t.target))})}function Ve(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function zt(n){return dt(n)?Ve(n)[0]:n}function je(n){return Re(n).map(t=>t.identifier)}function pt(n){const t=zt(n);return dt(n)?t.identifier:t.pointerId}function St(n){const t=zt(n);return[t.clientX,t.clientY]}function Be(n){const t={};if("buttons"in n&&(t.buttons=n.buttons),"shiftKey"in n){const{shiftKey:e,altKey:s,metaKey:i,ctrlKey:r}=n;Object.assign(t,{shiftKey:e,altKey:s,metaKey:i,ctrlKey:r})}return t}function ht(n,...t){return typeof n=="function"?n(...t):n}function Ke(){}function xe(...n){return n.length===0?Ke:n.length===1?n[0]:function(){let t;for(const e of n)t=e.apply(this,arguments)||t;return t}}function kt(n,t){return Object.assign({},t,n||{})}const Ue=32;class Ge{constructor(t,e,s){this.ctrl=t,this.args=e,this.key=s,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:e,ingKey:s,args:i}=this;e[s]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=i,t.axis=void 0,t.memo=void 0,t.elapsedTime=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const e=this.state,s=this.config;e._active||(this.reset(),this.computeInitial(),e._active=!0,e.target=t.target,e.currentTarget=t.currentTarget,e.lastOffset=s.from?ht(s.from,e):e.offset,e.offset=e.lastOffset),e.startTime=e.timeStamp=t.timeStamp}computeValues(t){const e=this.state;e._values=t,e.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:e,config:s,shared:i}=this;e.args=this.args;let r=0;if(t&&(e.event=t,s.preventDefault&&t.cancelable&&e.event.preventDefault(),e.type=t.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,Be(t)),i.down=i.pressed=i.buttons%2===1||i.touches>0,r=t.timeStamp-e.timeStamp,e.timeStamp=t.timeStamp,e.elapsedTime=e.timeStamp-e.startTime),e._active){const I=e._delta.map(Math.abs);D.addTo(e._distance,I)}this.axisIntent&&this.axisIntent(t);const[o,a]=e._movement,[h,f]=s.threshold,{_step:u,values:p}=e;if(s.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(o)>=h&&p[0]),u[1]===!1&&(u[1]=Math.abs(a)>=f&&p[1])):(u[0]===!1&&(u[0]=Math.abs(o)>=h&&Math.sign(o)*h),u[1]===!1&&(u[1]=Math.abs(a)>=f&&Math.sign(a)*f)),e.intentional=u[0]!==!1||u[1]!==!1,!e.intentional)return;const l=[0,0];if(s.hasCustomTransform){const[I,z]=p;l[0]=u[0]!==!1?I-u[0]:0,l[1]=u[1]!==!1?z-u[1]:0}else l[0]=u[0]!==!1?o-u[0]:0,l[1]=u[1]!==!1?a-u[1]:0;this.restrictToAxis&&!e._blocked&&this.restrictToAxis(l);const d=e.offset,v=e._active&&!e._blocked||e.active;v&&(e.first=e._active&&!e.active,e.last=!e._active&&e.active,e.active=i[this.ingKey]=e._active,t&&(e.first&&("bounds"in s&&(e._bounds=ht(s.bounds,e)),this.setup&&this.setup()),e.movement=l,this.computeOffset()));const[E,S]=e.offset,[[k,R],[O,x]]=e._bounds;e.overflow=[E<k?-1:E>R?1:0,S<O?-1:S>x?1:0],e._movementBound[0]=e.overflow[0]?e._movementBound[0]===!1?e._movement[0]:e._movementBound[0]:!1,e._movementBound[1]=e.overflow[1]?e._movementBound[1]===!1?e._movement[1]:e._movementBound[1]:!1;const V=e._active?s.rubberband||[0,0]:[0,0];if(e.offset=Oe(e._bounds,e.offset,V),e.delta=D.sub(e.offset,d),this.computeMovement(),v&&(!e.last||r>Ue)){e.delta=D.sub(e.offset,d);const I=e.delta.map(Math.abs);D.addTo(e.distance,I),e.direction=e.delta.map(Math.sign),e._direction=e._delta.map(Math.sign),!e.first&&r>0&&(e.velocity=[I[0]/r,I[1]/r])}}emit(){const t=this.state,e=this.shared,s=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!s.triggerAllEvents)return;const i=this.handler(m(m(m({},e),t),{},{[this.aliasKey]:t.values}));i!==void 0&&(t.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Fe([n,t],e){const s=Math.abs(n),i=Math.abs(t);if(s>i&&s>e)return"x";if(i>s&&i>e)return"y"}class Ye extends Ge{constructor(...t){super(...t),L(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=D.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=D.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const e=this.state,s=this.config;if(!e.axis&&t){const i=typeof s.axisThreshold=="object"?s.axisThreshold[Yt(t)]:s.axisThreshold;e.axis=Fe(e._movement,i)}e._blocked=(s.lockDirection||!!s.axis)&&!e.axis||!!s.axis&&s.axis!==e.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const ze=n=>n,Ot=.15,Wt={enabled(n=!0){return n},eventOptions(n,t,e){return m(m({},e.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[Ot,Ot];case!1:return[0,0];default:return D.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return D.toVector(n)},transform(n,t,e){const s=n||e.shared.transform;return this.hasCustomTransform=!!s,s||ze},threshold(n){return D.toVector(n,0)}},We=0,Q=m(m({},Wt),{},{axis(n,t,{axis:e}){if(this.lockDirection=e==="lock",!this.lockDirection)return e},axisThreshold(n=We){return n},bounds(n={}){if(typeof n=="function")return r=>Q.bounds(n(r));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:t=-1/0,right:e=1/0,top:s=-1/0,bottom:i=1/0}=n;return[[t,e],[s,i]]}}),ct=10,It={ArrowRight:(n=1)=>[ct*n,0],ArrowLeft:(n=1)=>[-ct*n,0],ArrowUp:(n=1)=>[0,-ct*n],ArrowDown:(n=1)=>[0,ct*n]};class He extends Ye{constructor(...t){super(...t),L(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const e=t._bounds.getBoundingClientRect(),s=t.currentTarget.getBoundingClientRect(),i={left:e.left-s.left+t.offset[0],right:e.right-s.right+t.offset[0],top:e.top-s.top+t.offset[1],bottom:e.bottom-s.bottom+t.offset[1]};t._bounds=Q.bounds(i)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const e=this.config,s=this.state;if(t.buttons!=null&&(Array.isArray(e.pointerButtons)?!e.pointerButtons.includes(t.buttons):e.pointerButtons!==-1&&e.pointerButtons!==t.buttons))return;const i=this.ctrl.setEventIds(t);e.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(i&&i.size>1&&s._pointerActive)&&(this.start(t),this.setupPointer(t),s._pointerId=pt(t),s._pointerActive=!0,this.computeValues(St(t)),this.computeInitial(),e.preventScrollAxis&&Yt(t)!=="mouse"?(s._active=!1,this.setupScrollPrevention(t)):e.delay>0?(this.setupDelayTrigger(t),e.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const e=this.state;e._active=!0,e._preventScroll=!0,e._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const e=this.state,s=this.config;if(!e._pointerActive||e.type===t.type&&t.timeStamp===e.timeStamp)return;const i=pt(t);if(e._pointerId!==void 0&&i!==e._pointerId)return;const r=St(t);if(document.pointerLockElement===t.target?e._delta=[t.movementX,t.movementY]:(e._delta=D.sub(r,e._values),this.computeValues(r)),D.addTo(e._movement,e._delta),this.compute(t),e._delayed&&e.intentional){this.timeoutStore.remove("dragDelay"),e.active=!1,this.startPointerDrag(t);return}if(s.preventScrollAxis&&!e._preventScroll)if(e.axis)if(e.axis===s.preventScrollAxis||s.preventScrollAxis==="xy"){e._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{}const e=this.state,s=this.config;if(!e._active||!e._pointerActive)return;const i=pt(t);if(e._pointerId!==void 0&&i!==e._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[r,o]=e._distance;if(e.tap=r<=s.tapsThreshold&&o<=s.tapsThreshold,e.tap&&s.filterTaps)e._force=!0;else{const[a,h]=e.direction,[f,u]=e.velocity,[p,l]=e.movement,[d,v]=s.swipe.velocity,[E,S]=s.swipe.distance,k=s.swipe.duration;e.elapsedTime<k&&(Math.abs(f)>d&&Math.abs(p)>E&&(e.swipe[0]=a),Math.abs(u)>v&&Math.abs(l)>S&&(e.swipe[1]=h))}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const e=this.config,s=e.device;e.pointerLock&&t.currentTarget.requestPointerLock(),e.pointerCapture||(this.eventStore.add(this.sharedConfig.window,s,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,s,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,s,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,Ne(t);const e=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",e),this.eventStore.add(this.sharedConfig.window,"touch","cancel",e),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const e=It[t.key];if(e){const s=this.state,i=t.shiftKey?10:t.altKey?.1:1;this.start(t),s._delta=e(i),s._keyboardActive=!0,D.addTo(s._movement,s._delta),this.compute(t),this.emit()}}keyUp(t){t.key in It&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const e=this.config.device;t(e,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(e,"change",this.pointerMove.bind(this)),t(e,"end",this.pointerUp.bind(this)),t(e,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function Ne(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const J=typeof window<"u"&&window.document&&window.document.createElement;function Xe(){return J&&"ontouchstart"in window}function At(){return Xe()||J&&window.navigator.maxTouchPoints>1}function qe(){return J&&"onpointerdown"in window}function Ze(){return J&&"exitPointerLock"in window.document}function Qe(){try{return"constructor"in GestureEvent}catch{return!1}}const M={isBrowser:J,gesture:Qe(),touch:At(),touchscreen:At(),pointer:qe(),pointerLock:Ze()},Je=250,$e=180,tn=.5,en=50,nn=250,Pt={mouse:0,touch:0,pen:8},sn=m(m({},Q),{},{device(n,t,{pointer:{touch:e=!1,lock:s=!1,mouse:i=!1}={}}){return this.pointerLock=s&&M.pointerLock,M.touch&&e?"touch":this.pointerLock?"mouse":M.pointer&&!i?"pointer":M.touch?"touch":"mouse"},preventScrollAxis(n,t,{preventScroll:e}){if(this.preventScrollDelay=typeof e=="number"?e:e||e===void 0&&n?Je:void 0,!(!M.touchscreen||e===!1))return n||(e!==void 0?"y":void 0)},pointerCapture(n,t,{pointer:{capture:e=!0,buttons:s=1,keys:i=!0}={}}){return this.pointerButtons=s,this.keys=i,!this.pointerLock&&this.device==="pointer"&&e},threshold(n,t,{filterTaps:e=!1,tapsThreshold:s=3,axis:i=void 0}){const r=D.toVector(n,e?s:i?1:0);return this.filterTaps=e,this.tapsThreshold=s,r},swipe({velocity:n=tn,distance:t=en,duration:e=nn}={}){return{velocity:this.transform(D.toVector(n)),distance:this.transform(D.toVector(t)),duration:e}},delay(n=0){switch(n){case!0:return $e;case!1:return 0;default:return n}},axisThreshold(n){return n?m(m({},Pt),n):Pt}});m(m({},Wt),{},{device(n,t,{shared:e,pointer:{touch:s=!1}={}}){if(e.target&&!M.touch&&M.gesture)return"gesture";if(M.touch&&s)return"touch";if(M.touchscreen){if(M.pointer)return"pointer";if(M.touch)return"touch"}},bounds(n,t,{scaleBounds:e={},angleBounds:s={}}){const i=o=>{const a=kt(ht(e,o),{min:-1/0,max:1/0});return[a.min,a.max]},r=o=>{const a=kt(ht(s,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof e!="function"&&typeof s!="function"?[i(),r()]:o=>[i(o),r(o)]},threshold(n,t,e){return this.lockDirection=e.axis==="lock",D.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});m(m({},Q),{},{mouseOnly:(n=!0)=>n});m(m({},Q),{},{mouseOnly:(n=!0)=>n});const Ht=new Map,yt=new Map;function rn(n){Ht.set(n.key,n.engine),yt.set(n.key,n.resolver)}const on={key:"drag",engine:He,resolver:sn};function an(n,t){if(n==null)return{};var e={},s=Object.keys(n),i,r;for(r=0;r<s.length;r++)i=s[r],!(t.indexOf(i)>=0)&&(e[i]=n[i]);return e}function cn(n,t){if(n==null)return{};var e=an(n,t),s,i;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,s)||(e[s]=n[s]))}return e}const un={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=M.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:t=!1}={}){return{passive:n,capture:t}},transform(n){return n}},fn=["target","eventOptions","window","enabled","transform"];function lt(n={},t){const e={};for(const[s,i]of Object.entries(t))switch(typeof i){case"function":e[s]=i.call(e,n[s],s,n);break;case"object":e[s]=lt(n[s],i);break;case"boolean":i&&(e[s]=n[s]);break}return e}function ln(n,t,e={}){const s=n,{target:i,eventOptions:r,window:o,enabled:a,transform:h}=s,f=cn(s,fn);if(e.shared=lt({target:i,eventOptions:r,window:o,enabled:a,transform:h},un),t){const u=yt.get(t);e[t]=lt(m({shared:e.shared},f),u)}else for(const u in f){const p=yt.get(u);p&&(e[u]=lt(m({shared:e.shared},f[u]),p))}return e}class Nt{constructor(t,e){L(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=e}add(t,e,s,i,r){const o=this._listeners,a=Me(e,s),h=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},f=m(m({},h),r);t.addEventListener(a,i,f);const u=()=>{t.removeEventListener(a,i,f),o.delete(u)};return o.add(u),u}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class hn{constructor(){L(this,"_timeouts",new Map)}add(t,e,s=140,...i){this.remove(t),this._timeouts.set(t,window.setTimeout(e,s,...i))}remove(t){const e=this._timeouts.get(t);e&&window.clearTimeout(e)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class dn{constructor(t){L(this,"gestures",new Set),L(this,"_targetEventStore",new Nt(this)),L(this,"gestureEventStores",{}),L(this,"gestureTimeoutStores",{}),L(this,"handlers",{}),L(this,"config",{}),L(this,"pointerIds",new Set),L(this,"touchIds",new Set),L(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),pn(this,t)}setEventIds(t){if(dt(t))return this.touchIds=new Set(je(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,e){this.handlers=t,this.nativeHandlers=e}applyConfig(t,e){this.config=ln(t,e,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const e=this.config.shared,s={};let i;if(!(e.target&&(i=e.target(),!i))){if(e.enabled){for(const o of this.gestures){const a=this.config[o],h=Ct(s,a.eventOptions,!!i);if(a.enabled){const f=Ht.get(o);new f(this,t,o).bind(h)}}const r=Ct(s,e.eventOptions,!!i);for(const o in this.nativeHandlers)r(o,"",a=>this.nativeHandlers[o](m(m({},this.state.shared),{},{event:a,args:t})),void 0,!0)}for(const r in s)s[r]=xe(...s[r]);if(!i)return s;for(const r in s){const{device:o,capture:a,passive:h}=Le(r);this._targetEventStore.add(i,o,"",s[r],{capture:a,passive:h})}}}}function N(n,t){n.gestures.add(t),n.gestureEventStores[t]=new Nt(n,t),n.gestureTimeoutStores[t]=new hn}function pn(n,t){t.drag&&N(n,"drag"),t.wheel&&N(n,"wheel"),t.scroll&&N(n,"scroll"),t.move&&N(n,"move"),t.pinch&&N(n,"pinch"),t.hover&&N(n,"hover")}const Ct=(n,t,e)=>(s,i,r,o={},a=!1)=>{var h,f;const u=(h=o.capture)!==null&&h!==void 0?h:t.capture,p=(f=o.passive)!==null&&f!==void 0?f:t.passive;let l=a?s:Pe(s,i,u);e&&p&&(l+="Passive"),n[l]=n[l]||[],n[l].push(r)};function gn(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Lt(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,s)}return e}function ut(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Lt(Object(e),!0).forEach(function(s){gn(n,s,e[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Lt(Object(e)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(e,s))})}return n}class mn{constructor(t,e,s,i,r){this._target=t,this._gestureKey=i,this._ctrl=new dn(e),this._ctrl.applyHandlers(e,r),this._ctrl.applyConfig(ut(ut({},s),{},{target:t}),i),this._ctrl.effect()}destroy(){this._ctrl.clean()}setConfig(t){this._ctrl.clean(),this._ctrl.applyConfig(ut(ut({},t),{},{target:this._target}),this._gestureKey),this._ctrl.effect()}}const U=function(t,e,s){return rn(on),new mn(t,{drag:e},s||{},"drag")};function _n(n,t){t===void 0&&(t={enabled:!0});var e=Mt(t),s=e.enabled,i=e.eventType,r=e.nodeForEvent,o=e.options,a=e.capture,h=function(f){n&&!n.contains(f.target)&&!f.defaultPrevented&&n.dispatchEvent(new CustomEvent("clickoutside",{detail:f}))};return t.enabled!==!1&&r.addEventListener(i,h,o),{update:function(f){var u;r.removeEventListener(i,h,a),u=Mt(f),s=u.enabled,i=u.eventType,r=u.nodeForEvent,o=u.options,a=u.capture,s&&r.addEventListener(i,h,o)},destroy:function(){r.removeEventListener(i,h,a)}}}function Mt(n){var t,e,s,i,r;return{enabled:(t=n.enabled)!==null&&t!==void 0?t:!0,nodeForEvent:(s=(e=n.limit)===null||e===void 0?void 0:e.parent)!==null&&s!==void 0?s:document,eventType:(i=n.event)!==null&&i!==void 0?i:"click",options:n.options,capture:typeof n.options=="object"?(r=n.options)===null||r===void 0?void 0:r.capture:n.options}}var Z=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var n=0,t=arguments.length;t--;)n+=arguments[t]*arguments[t];return Math.sqrt(n)});function yn(){var n=new Z(6);return Z!=Float32Array&&(n[1]=0,n[2]=0,n[4]=0,n[5]=0),n[0]=1,n[3]=1,n}function G(){var n=new Z(2);return Z!=Float32Array&&(n[0]=0,n[1]=0),n}function Rt(n,t){var e=new Z(2);return e[0]=n,e[1]=t,e}function vn(n,t){return n[0]=t[0],n[1]=t[1],n}function gt(n,t,e){return n[0]=t,n[1]=e,n}function mt(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n}function bn(n,t,e){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n}function wn(n){var t=n[0],e=n[1];return Math.hypot(t,e)}function En(n,t){return n[0]*t[0]+n[1]*t[1]}var Vt=wn,jt=bn;(function(){var n=G();return function(t,e,s,i,r,o){var a,h;for(e||(e=2),s||(s=0),i?h=Math.min(i*e+s,t.length):h=t.length,a=s;a<h;a+=e)n[0]=t[a],n[1]=t[a+1],r(n,n,o),t[a]=n[0],t[a+1]=n[1];return t}})();function Dn(n,t,e,s){const i=e[0],r=e[1],o=Math.cos(s),a=Math.sin(s);return n[0]=o*i,n[1]=a*i,n[2]=-a*r,n[3]=o*r,n[4]=t[0],n[5]=t[1],n}function Bt(n,t){const e=t[1]<n[1]?-1:1;return Math.acos(En(n,t)/(Vt(n)*Vt(t)))*e}function Tn(n){let t,e,s,i,r,o,a,h,f,u,p,l,d,v,E,S,k,R,O,x,V,I,z,X,F;return{c(){t=A("div"),e=A("canvas"),s=B(),i=A("div"),r=A("div"),o=B(),a=A("div"),h=B(),f=A("div"),u=B(),p=A("div"),l=B(),d=A("div"),v=B(),E=A("div"),S=B(),k=A("div"),R=B(),O=A("div"),x=B(),V=A("div"),this.h()},l(_){t=P(_,"DIV",{class:!0});var T=C(t);e=P(T,"CANVAS",{width:!0,height:!0,class:!0}),C(e).forEach(w),s=K(T),i=P(T,"DIV",{class:!0,style:!0});var g=C(i);r=P(g,"DIV",{class:!0}),C(r).forEach(w),o=K(g),a=P(g,"DIV",{class:!0}),C(a).forEach(w),h=K(g),f=P(g,"DIV",{class:!0}),C(f).forEach(w),u=K(g),p=P(g,"DIV",{class:!0}),C(p).forEach(w),l=K(g),d=P(g,"DIV",{class:!0}),C(d).forEach(w),v=K(g),E=P(g,"DIV",{class:!0}),C(E).forEach(w),S=K(g),k=P(g,"DIV",{class:!0}),C(k).forEach(w),R=K(g),O=P(g,"DIV",{class:!0}),C(O).forEach(w),x=K(g),V=P(g,"DIV",{class:!0}),C(V).forEach(w),g.forEach(w),T.forEach(w),this.h()},h(){b(e,"width",n[2]),b(e,"height",n[3]),b(e,"class","svelte-ycy9gn"),b(r,"class","move svelte-ycy9gn"),b(a,"class","top svelte-ycy9gn"),b(f,"class","bottom svelte-ycy9gn"),b(p,"class","left svelte-ycy9gn"),b(d,"class","right svelte-ycy9gn"),b(E,"class","top-left svelte-ycy9gn"),b(k,"class","top-right svelte-ycy9gn"),b(O,"class","bottom-left svelte-ycy9gn"),b(V,"class","bottom-right svelte-ycy9gn"),b(i,"class","bounding-box svelte-ycy9gn"),b(i,"style",I=`left:${n[6][0]}px;top:${n[6][1]}px;width:${n[4]}px;height:${n[5]}px;transform:matrix(${n[0][0]},${n[0][1]},${n[0][2]},${n[0][3]},${n[0][4]},${n[0][5]})`),vt(i,"inactive",!n[7]),b(t,"class","container svelte-ycy9gn"),ue(()=>n[39].call(t))},m(_,T){ft(_,t,T),y(t,e),n[29](e),y(t,s),y(t,i),y(i,r),n[30](r),y(i,o),y(i,a),n[31](a),y(i,h),y(i,f),n[32](f),y(i,u),y(i,p),n[33](p),y(i,l),y(i,d),n[34](d),y(i,v),y(i,E),n[35](E),y(i,S),y(i,k),n[36](k),y(i,R),y(i,O),n[37](O),y(i,x),y(i,V),n[38](V),z=fe(t,n[39].bind(t)),X||(F=[le(_n.call(null,i)),_t(i,"clickoutside",n[18]),_t(t,"click",n[17])],X=!0)},p(_,T){T[0]&4&&b(e,"width",_[2]),T[0]&8&&b(e,"height",_[3]),T[0]&113&&I!==(I=`left:${_[6][0]}px;top:${_[6][1]}px;width:${_[4]}px;height:${_[5]}px;transform:matrix(${_[0][0]},${_[0][1]},${_[0][2]},${_[0][3]},${_[0][4]},${_[0][5]})`)&&b(i,"style",I),T[0]&128&&vt(i,"inactive",!_[7])},i:bt,o:bt,d(_){_&&w(t),n[29](null),n[30](null),n[31](null),n[32](null),n[33](null),n[34](null),n[35](null),n[36](null),n[37](null),n[38](null),z(),X=!1,he(F)}}}const Sn=G(),Kt=G(),kn=G();function On(n,t,e,s,i,r,o){n.save(),n.clearRect(0,0,t,e),n.translate(t*.5,e*.5),n.transform(o[0],o[1],o[2],o[3],o[4],o[5]),n.drawImage(s,-i*.5,-r*.5,i,r),n.restore()}function In(n,t,e){let s,{src:i}=t,{position:r=Rt(0,0)}=t,{scale:o=Rt(1,1)}=t,{rotation:a=0}=t,{transform:h=yn()}=t,{image:f=typeof Image>"u"?void 0:new Image}=t,{canvas:u=void 0}=t,{ctx:p=void 0}=t,l,d,v,E,S=G(),k,R=G(),O=G(),x=!1,V=0;function I(){e(7,x=!0),V=Date.now()}function z(){V<Date.now()-100&&e(7,x=!1)}function X(c){e(19,r=mt(r,r,c.delta))}function F(c,q){return function(Y){const H=gt(Kt,q*Y.delta[c]/S[c],q*Y.delta[c]/S[c]);e(20,o=mt(o,o,H))}}let _=G(),T=0;function g(c){return function(W){W.first&&(vn(_,W.xy),T=a);const Y=jt(Kt,O,_),H=jt(kn,O,W.xy);c===1?e(21,a=T+Bt(Y,H)):e(21,a=T+Bt(H,Y))}}let $,tt,et,nt,st,it,rt,ot,at;de(()=>{const c=new U($,X),q=new U(tt,F(1,-1)),W=new U(et,F(1,1)),Y=new U(nt,F(0,-1)),H=new U(st,F(0,1)),re=new U(it,g(1)),oe=new U(rt,g(-1)),ae=new U(ot,g(1)),ce=new U(at,g(-1));return()=>{c.destroy(),q.destroy(),W.destroy(),Y.destroy(),H.destroy(),re.destroy(),oe.destroy(),ae.destroy(),ce.destroy()}});function Xt(c){j[c?"unshift":"push"](()=>{u=c,e(1,u)})}function qt(c){j[c?"unshift":"push"](()=>{$=c,e(8,$)})}function Zt(c){j[c?"unshift":"push"](()=>{tt=c,e(9,tt)})}function Qt(c){j[c?"unshift":"push"](()=>{et=c,e(10,et)})}function Jt(c){j[c?"unshift":"push"](()=>{nt=c,e(11,nt)})}function $t(c){j[c?"unshift":"push"](()=>{st=c,e(12,st)})}function te(c){j[c?"unshift":"push"](()=>{it=c,e(13,it)})}function ee(c){j[c?"unshift":"push"](()=>{rt=c,e(14,rt)})}function ne(c){j[c?"unshift":"push"](()=>{ot=c,e(15,ot)})}function se(c){j[c?"unshift":"push"](()=>{at=c,e(16,at)})}function ie(){l=this.clientWidth,d=this.clientHeight,e(2,l),e(3,d)}return n.$$set=c=>{"src"in c&&e(24,i=c.src),"position"in c&&e(19,r=c.position),"scale"in c&&e(20,o=c.scale),"rotation"in c&&e(21,a=c.rotation),"transform"in c&&e(0,h=c.transform),"image"in c&&e(22,f=c.image),"canvas"in c&&e(1,u=c.canvas),"ctx"in c&&e(23,p=c.ctx)},n.$$.update=()=>{if(n.$$.dirty[0]&2&&e(23,p=(u==null?void 0:u.getContext("2d"))||void 0),n.$$.dirty[0]&88080396&&f&&k!==i&&(e(22,f.crossOrigin="anonymous",f),e(22,f.onload=()=>{if(f){const c=Math.min(l/f.width,d/f.height);e(4,v=f.width*c),e(5,E=f.height*c)}},f),e(22,f.src=i,f),e(26,k=i)),n.$$.dirty[0]&33554480&&e(25,S=gt(S,v,E)),n.$$.dirty[0]&60&&(e(6,R[0]=l*.5-v*.5,R),e(6,R[1]=d*.5-E*.5,R)),n.$$.dirty[0]&3670017&&e(0,h=Dn(h,r,o,a)),n.$$.dirty[0]&134742030&&u){const c=u.getBoundingClientRect();e(27,O=mt(O,gt(Sn,c.left+l*.5,c.top+d*.5),r))}n.$$.dirty[0]&12582973&&e(28,s=()=>{p&&f&&On(p,l,d,f,v,E,h)}),n.$$.dirty[0]&268435456&&pe().then(s)},[h,u,l,d,v,E,R,x,$,tt,et,nt,st,it,rt,ot,at,I,z,r,o,a,f,p,i,S,k,O,s,Xt,qt,Zt,Qt,Jt,$t,te,ee,ne,se,ie]}class An extends xt{constructor(t){super(),Ut(this,t,In,Tn,Gt,{src:24,position:19,scale:20,rotation:21,transform:0,image:22,canvas:1,ctx:23},null,[-1,-1])}}function Pn(n){let t,e,s,i,r,o,a,h,f;function u(l){n[2](l)}let p={src:"https://images.unsplash.com/photo-1579353977828-2a4eab540b9a?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8c2FtcGxlfGVufDB8fDB8fA%3D%3D&w=1000&q=80"};return n[0]!==void 0&&(p.canvas=n[0]),e=new An({props:p}),j.push(()=>ge(e,"canvas",u)),{c(){t=A("div"),me(e.$$.fragment),i=B(),r=A("button"),o=_e("Download"),this.h()},l(l){t=P(l,"DIV",{});var d=C(t);ye(e.$$.fragment,d),d.forEach(w),i=K(l),r=P(l,"BUTTON",{class:!0});var v=C(r);o=ve(v,"Download"),v.forEach(w),this.h()},h(){b(r,"class","svelte-1kxn0xq")},m(l,d){ft(l,t,d),be(e,t,null),ft(l,i,d),ft(l,r,d),y(r,o),a=!0,h||(f=_t(r,"click",function(){Se(n[1])&&n[1].apply(this,arguments)}),h=!0)},p(l,[d]){n=l;const v={};!s&&d&1&&(s=!0,v.canvas=n[0],we(()=>s=!1)),e.$set(v)},i(l){a||(Ee(e.$$.fragment,l),a=!0)},o(l){De(e.$$.fragment,l),a=!1},d(l){l&&w(t),Te(e),l&&w(i),l&&w(r),h=!1,f()}}}function Cn(n,t,e){let s,i;function r(o){i=o,e(0,i)}return n.$$.update=()=>{n.$$.dirty&1&&e(1,s=()=>window.open(i.toDataURL("image/png").replace("image/png","image/octet-stream")))},[i,s,r]}class Mn extends xt{constructor(t){super(),Ut(this,t,Cn,Pn,Gt,{})}}export{Mn as default};
